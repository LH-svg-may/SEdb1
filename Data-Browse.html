<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Data-Browse</title>
  <link rel="stylesheet" href="css/header.css">
  <link rel="stylesheet" href="css/footer.css">
  <link rel="stylesheet" href="css/Data-Browse-section.css">
</head>
<body>

<header>
  <div class="header-left">
    <img src="img/img.png" alt="">
  </div>
  <div class="header-right">
    <div>
      <a href="Home.html">Home</a>
      <a href="Data-Browse.html">Data-Browse</a>
      <a href="Search.html">Search</a>
      <a>
        Analysis
        <span></span>
      </a>
      <a>Genome-Browse</a>
      <a>Download</a>
      <a>Statistics</a>
      <a>Contact</a>
      <a>Help</a>
    </div>
  </div>

</header>


<section>
  <div class="container">
    <div class="sidebar">
      <p>Data-browse</p>
      <div class="title" style="margin-top:5px">Species</div>
      <div class="filter-list" data-filter="species">
        <div><button></button><span data-value="Human">Human</span></div>
        <div><button></button><span data-value="Mouse">Mouse</span></div>
        <div><button></button><span data-value="Arabidopsis_thaliana">Arabidopsis_thaliana</span></div>
        <div><button></button><span data-value="Zea_mays">Zea_mays</span></div>
      </div>
      <div class="filter-pagination" id="species-pagination"></div>

      <div class="title">Data source</div>
      <div class="filter-list" data-filter="source">
        <div><button></button><span data-value="NCBI GEO/SRA">NCBI GEO/SRA</span></div>
        <div><button></button><span data-value="ENCODE">ENCODE</span></div>
        <div><button></button><span data-value="Roadmap">Roadmap</span></div>
        <div><button></button><span data-value="NGDC GSA">NGDC GSA</span></div>
      </div>
      <div class="filter-pagination" id="source-pagination"></div>

      <div class="title">Biosample type</div>
      <div class="filter-list" data-filter="Biosample">
        <div><button></button><span data-value="Cell line">Cell line</span></div>
        <div><button></button><span data-value="Tissue">Tissue</span></div>
        <div><button></button><span data-value="Primary cell">Primary cell</span></div>
        <div><button></button><span data-value="Stem cell">Stem cell</span></div>
        <div><button></button><span data-value="Other">Other</span></div>
        <div><button></button><span data-value="In vitro differentiated cell">In vitro differentiated cell</span></div>
        <div><button></button><span data-value="Induced pluripotent stem cell">Induced pluripotent stem cell</span></div>
        <div><button></button><span data-value="Induced pluripotent stem cell line">Induced pluripotent stem cell line</span></div>
        <div><button></button><span data-value="In vitro activated cell">In vitro activated cell</span></div>
        <div><button></button><span data-value="erythroid progenitor cell">erythroid progenitor cell</span></div>
        <div><button></button><span data-value="Reprogramming cell">Reprogramming cell</span></div>
      </div>
      <div class="filter-pagination" id="biosample-pagination"></div>

      <div class="title">Tissue Type</div>
      <div class="filter-list" data-filter="tissuetype">
        <div><button></button><span data-value="Embryo">Embryo</span></div>
        <div><button></button><span data-value="Brain">Brain</span></div>
        <div><button></button><span data-value="Bone marrow">Bone marrow</span></div>
        <div><button></button><span data-value="Blood">Blood</span></div>
        <div><button></button><span data-value="Lung">Lung</span></div>

        <div><button></button><span data-value="Liver">Liver</span></div>
        <div><button></button><span data-value="Tumor">Tumor</span></div>
        <div><button></button><span data-value="Breast">Breast marrow</span></div>
        <div><button></button><span data-value="Colon">Colon</span></div>
        <div><button></button><span data-value="Mammary gland">Mammary gland</span></div>

        <div><button></button><span data-value="Pancreas">Pancreas</span></div>
        <div><button></button><span data-value="Heart">Heart</span></div>
        <div><button></button><span data-value="Skin">Skin</span></div>
        <div><button></button><span data-value="Adipose">Adipose</span></div>
        <div><button></button><span data-value="Prostate">Prostate</span></div>

        <div><button></button><span data-value="Stomach">Stomach</span></div>
        <div><button></button><span data-value="Kidney">Kidney</span></div>
        <div><button></button><span data-value="Neuroblastoma">Neuroblastoma</span></div>
        <div><button></button><span data-value="Peripheral blood">Peripheral blood</span></div>
        <div><button></button><span data-value="Bone">Bone</span></div>

        <div><button></button><span data-value="Spleen">Spleen</span></div>
        <div><button></button><span data-value="Lymph node">Lymph node</span></div>
        <div><button></button><span data-value="Skeletal muscle">Skeletal muscle</span></div>
        <div><button></button><span data-value="hESC">hESC</span></div>
        <div><button></button><span data-value="Ovary">Ovary</span></div>

        <div><button></button><span data-value="Haematopoietic and lymphoid tissue">Haematopoietic and lymphoid tissue</span></div>
        <div><button></button><span data-value="Testis">Testis</span></div>
        <div><button></button><span data-value="Glioblastoma">Glioblastoma</span></div>
        <div><button></button><span data-value="Other">Other</span></div>
        <div><button></button><span data-value="Retina">Retina</span></div>

        <div><button></button><span data-value="Gastrointestinal Stromal">Gastrointestinal Stromal</span></div>
        <div><button></button><span data-value="iPSCs">iPSCs</span></div>
        <div><button></button><span data-value="Embryonic fibroblasts">Embryonic fibroblasts</span></div>
        <div><button></button><span data-value="Esophagus">Esophagus</span></div>
        <div><button></button><span data-value="Lymphoma">Lymphoma</span></div>

        <div><button></button><span data-value="Renal">Renal</span></div>
        <div><button></button><span data-value="Thymus">Thymus</span></div>
        <div><button></button><span data-value="Muscle">Muscle</span></div>
        <div><button></button><span data-value="Cerebellum">Cerebellum</span></div>
        <div><button></button><span data-value="Spleen and lymph nodes">Spleen and lymph nodes</span></div>

        <div><button></button><span data-value="Fibroblast">Fibroblast</span></div>
        <div><button></button><span data-value="Placenta">Placenta</span></div>
        <div><button></button><span data-value="Placenta villous core">Placenta villous core</span></div>
        <div><button></button><span data-value="Tracheobronchial epithelial">Tracheobronchial epithelial</span></div>
        <div><button></button><span data-value="Bladder">Bladder</span></div>

        <div><button></button><span data-value="Umbilical vein">Umbilical vein</span></div>
        <div><button></button><span data-value="Ascites">Ascites</span></div>
        <div><button></button><span data-value="Bone marrow-derived macrophage">Bone marrow-derived macrophage</span></div>
        <div><button></button><span data-value="Embryonic kidney">Embryonic kidney</span></div>
        <div><button></button><span data-value="Forelimb">Forelimb</span></div>

        <div><button></button><span data-value="Liposarcoma">Liposarcoma</span></div>
        <div><button></button><span data-value="Uterus">Uterus</span></div>
        <div><button></button><span data-value="Adrenal gland">Adrenal gland</span></div>
        <div><button></button><span data-value="Eye">Eye</span></div>
        <div><button></button><span data-value="Forebrain">Forebrain</span></div>

        <div><button></button><span data-value="Cervix">Cervix</span></div>
        <div><button></button><span data-value="Cortex">Cortex</span></div>
        <div><button></button><span data-value="Intestine">Intestine</span></div>
        <div><button></button><span data-value="Oral cavity">Oral cavity</span></div>
        <div><button></button><span data-value="Ovarian">Ovarian</span></div>

        <div><button></button><span data-value="Umbilical cord">Umbilical cord</span></div>
        <div><button></button><span data-value="Embryonic forebrain">Embryonic forebrain</span></div>
        <div><button></button><span data-value="Foreskin">Foreskin</span></div>
        <div><button></button><span data-value="Small intestine">Small intestine</span></div>
        <div><button></button><span data-value="Tonsil">Tonsil</span></div>

        <div><button></button><span data-value="Haematopoietic and lymphoid tissue bone marrow">Haematopoietic and lymphoid tissue bone marrow</span></div>
        <div><button></button><span data-value="Embryonic heart">Embryonic heart</span></div>
        <div><button></button><span data-value="Head and neck">Head and neck</span></div>
        <div><button></button><span data-value="Hydrothorax">Hydrothorax</span></div>
        <div><button></button><span data-value="Leukophereses">Leukophereses</span></div>

        <div><button></button><span data-value="Peripheral nerve">Peripheral nerve</span></div>
        <div><button></button><span data-value="Retinal Pigmented Epithelial">Retinal Pigmented Epithelial</span></div>
        <div><button></button><span data-value="Trophoblast">Trophoblast</span></div>
        <div><button></button><span data-value="Connective tissue">Connective tissue</span></div>
        <div><button></button><span data-value="Embryo endodermal">Embryo endodermal</span></div>

        <div><button></button><span data-value="Embryonic hindbrain">Embryonic hindbrain</span></div>
        <div><button></button><span data-value="Embryonic liver">Embryonic liver</span></div>
        <div><button></button><span data-value="Embryonic midbrain">Embryonic midbrain</span></div>
        <div><button></button><span data-value="Ewing sarcoma">Ewing sarcoma</span></div>
        <div><button></button><span data-value="Fetal lung">Fetal lung</span></div>

        <div><button></button><span data-value="HUVEC">HUVEC</span></div>
        <div><button></button><span data-value="LPM">LPM</span></div>
        <div><button></button><span data-value="Lymph nodes and spleen">Lymph nodes and spleen</span></div>
        <div><button></button><span data-value="Melanoma">Melanoma</span></div>
        <div><button></button><span data-value="Pleural effusion">Pleural effusion</span></div>

        <div><button></button><span data-value="Primary skeletal muscle fibers">Primary skeletal muscle fibers</span></div>
        <div><button></button><span data-value="Alveoli">Alveoli</span></div>
        <div><button></button><span data-value="Arter">Arter</span></div>
        <div><button></button><span data-value="Back skin">Back skin</span></div>
        <div><button></button><span data-value="Buffy coat">Buffy coat</span></div>

        <div><button></button><span data-value="Cells cultured in vitro">Cells cultured in vitro</span></div>
        <div><button></button><span data-value="Cholangio">Cholangio</span></div>
        <div><button></button><span data-value="Embryonic facial prominence">Embryonic facial prominence</span></div>
        <div><button></button><span data-value="Embryonic lung">Embryonic lung</span></div>
        <div><button></button><span data-value="Haematopoietic and Lymphoid">Haematopoietic and Lymphoid</span></div>

        <div><button></button><span data-value="Haematopoietic and lymphoid tissue blood">Haematopoietic and lymphoid tissue blood</span></div>
        <div><button></button><span data-value="hiPSC">hiPSC</span></div>
        <div><button></button><span data-value="Left ventricle">Left ventricle</span></div>
        <div><button></button><span data-value="Limb">Limb</span></div>
        <div><button></button><span data-value="Limbs">Limbs</span></div>
      </div>
      <div class="filter-pagination" id="tissuetype-pagination"></div>

    </div>


<!--    左侧筛选栏分页实现-->
    <script>
      const filterItemsPerPage = 5;

      // 初始化筛选栏列表分页
      function initFilterPagination() {
        document.querySelectorAll('.filter-list').forEach(filterList => {
          const filterType = filterList.dataset.filter.toLowerCase(); // 转换为小写确保匹配
          const items = filterList.querySelectorAll('div');
          const paginationId = `${filterType}-pagination`;
          const paginationContainer = document.getElementById(paginationId);

          if (!paginationContainer) return;

          // 如果选项不超过每页数量，不显示分页
          if (items.length <= filterItemsPerPage) {
            paginationContainer.style.display = 'none';
            items.forEach(item => item.classList.add('show'));
            return;
          }

          // 初始化分页
          renderFilterPagination(items, paginationContainer, 1);

          // 添加分页点击事件
          paginationContainer.addEventListener('click', function(e) {
            if (e.target.classList.contains('page-link')) {
              e.preventDefault();
              e.stopPropagation();
              const page = parseInt(e.target.dataset.page);
              renderFilterPagination(items, paginationContainer, page);
            }
          });
        });
      }



      // 渲染筛选列表分页
      function renderFilterPagination(items, container, currentPage) {
        const totalItems = items.length;
        const totalPages = Math.ceil(totalItems / filterItemsPerPage);

        // 隐藏所有项
        items.forEach(item => item.classList.remove('show'));

        // 显示当前页的项
        const start = (currentPage - 1) * filterItemsPerPage;
        const end = start + filterItemsPerPage;
        for (let i = start; i < end && i < items.length; i++) {
          items[i].classList.add('show');
        }

        // 渲染分页控件
        container.innerHTML = `
    <ul class="pagination">
      ${renderPaginationLinks(totalPages, currentPage)}
    </ul>
  `;
      }

      // 渲染分页链接 (复用右侧表格的逻辑)
      function renderPaginationLinks(totalPages, currentPage) {
        if (totalPages <= 1) return '';

        let html = '';
        const maxVisiblePages = 5;

        // 上一页按钮
        if (currentPage > 1) {
          html += `<li><a href="#" class="page-link" data-page="${currentPage - 1}">«</a></li>`;
        }

        // 显示最多5个页码按钮
        let startPage = Math.max(1, currentPage - Math.floor(maxVisiblePages / 2));
        let endPage = Math.min(totalPages, startPage + maxVisiblePages - 1);

        // 调整起始页码以确保显示maxVisiblePages个按钮
        if (endPage - startPage + 1 < maxVisiblePages) {
          startPage = Math.max(1, endPage - maxVisiblePages + 1);
        }

        // 第一页按钮
        if (startPage > 1) {
          html += `<li><a href="#" class="page-link" data-page="1">1</a></li>`;
          if (startPage > 2) html += '<li><span>...</span></li>';
        }

        // 页码按钮
        for (let i = startPage; i <= endPage; i++) {
          html += `
      <li>
        <a href="#" class="page-link ${i === currentPage ? 'active' : ''}"
           data-page="${i}">${i}</a>
      </li>
    `;
        }

        // 最后一页按钮
        if (endPage < totalPages) {
          if (endPage < totalPages - 1) html += '<li><span>...</span></li>';
          html += `<li><a href="#" class="page-link" data-page="${totalPages}">${totalPages}</a></li>`;
        }

        // 下一页按钮
        if (currentPage < totalPages) {
          html += `<li><a href="#" class="page-link" data-page="${currentPage + 1}">»</a></li>`;
        }

        return html;
      }

      // 确保在DOM加载完成后初始化
      document.addEventListener('DOMContentLoaded', function() {
        initFilterPagination();
      });
    </script>

    <!-- 右侧表格 -->
    <div class="table-container">
      <div>
        <button>Download</button>
        <p id="result-count">From 1 to 20 results,Total 5,387 items</p>
        <div>
          <label>Search:</label>
          <input type="text" id="search input">
        </div>
      </div>
      <table id="data-table">
        <thead>
        <tr>
          <th>Sample ID<span class="sort-icon">↑↓</span></th>
          <th>Species<span class="sort-icon">↑↓</span></th>
          <th>Data source<span class="sort-icon">↑↓</span></th>
          <th>Biosample type<span class="sort-icon">↑↓</span></th>
          <th>Tissue Type<span class="sort-icon">↑↓</span></th>
          <th>Biosample name<span class="sort-icon">↑↓</span></th>
        </tr>
        </thead>
        <tbody>
        <!-- 数据行将通过 JavaScript 动态生成 -->
        </tbody>
      </table>
      <p id="Select option" style="font-size:25px;">show
        <select id="rows-per-page" style="font-size:25px;">
          <option value="20">20</option>
          <option value="50">50</option>
          <option value="100">100</option>
          <option value="200">200</option>
          <option value="500">500</option>
        </select>
        entries
      </p>

      <!--      分页-->
      <div class="pagination-container" style="margin-left:1150px;">
        <ul class="pagination" id="pagination"></ul>
      </div>


    </div>
  </div>
  <!--表格导入渲染和分页-->
  <script>

    // 分页相关变量
    let rowsPerPage = 20;
    let currentPage = 1;
    let tableData = [];//存储.csv文件加载的原始数据
    let filteredData = [];//存储筛选后的数据
    // 排序状态
    let sortState = {
      column: null,
      direction: 'asc'
    };

    //每页行数
    document.addEventListener('DOMContentLoaded', function() {
      const rowsPerPageSelect=document.getElementById('rows-per-page');
      rowsPerPageSelect.addEventListener('change',function(){
        rowsPerPage=parseInt(this.value);
        currentPage=1;
        renderTable(filteredData,currentPage);
      })
      const searchInput = document.getElementById('search input');

      searchInput.addEventListener('input', function() {
        const searchTerm = this.value.toLowerCase();
        filteredData = tableData.filter(item => {
          return Object.values(item).some(value =>
                  value.toString().toLowerCase().includes(searchTerm)
          );
        });

        currentPage = 1;
        renderTable(filteredData, currentPage);
        if(sortState.column){
          sortTable(sortState.column,sortState.direction);
        }
      });

      // 加载数据
      loadCSVData();
    })
    // 加载CSV数据
    async function loadCSVData() {
      try {
        document.querySelector('#result-count').innerHTML = 'Loading data... <span class="loading"></span>';
        const response = await fetch('SEdb 2.0-a comprehensive human and mouse Super-Enhancer database (3).csv');
        if (!response.ok) {
          throw new Error(`HTTP error! status: ${response.status}`);
        }
        const csvText = await response.text();
        tableData = parseCSV(csvText);
        filteredData = [...tableData];

        bindSortEvents();

        renderTable(filteredData, currentPage);
        updateFilterCounts();
        //点击事件
        addSampleIdClickHandlers();
      } catch (error) {
        console.error('Error loading CSV file:', error);
        document.getElementById("result-count").textContent = 'Error loading data. Please try again.';
      }
    }
    function bindSortEvents(){
      document.querySelectorAll('#data-table th').forEach(th=>{
        th.replaceWith(th.cloneNode(true));
      })
      // 添加表头点击事件
      document.querySelectorAll('#data-table th').forEach(th => {
        th.addEventListener('click', function() {
          const columnIndex = this.cellIndex;
          const columnName = this.textContent.trim().replace('↑', '').replace('↓', '').trim();

          // 确定排序方向
          if (sortState.column === columnName) {
            sortState.direction = sortState.direction === 'asc' ? 'desc' : 'asc';
          } else {
            sortState.column = columnName;
            sortState.direction = 'asc';
          }

          // 更新表头样式
          document.querySelectorAll('#data-table th').forEach(header => {
            header.classList.remove('active', 'sort-asc', 'sort-desc');
            header.querySelector('.sort-icon').textContent = '↑↓';
          });

          this.classList.add('active', sortState.direction === 'asc' ? 'sort-asc' : 'sort-desc');
          this.querySelector('.sort-icon').textContent = sortState.direction === 'asc' ? '↑' : '↓';

          sortTable(columnName, sortState.direction);
        });
      });
    }



    // 排序表格函数
    function sortTable(columnName, direction) {
      // 创建列名到数据属性的映射
      const columnMap = {
        'Sample ID': 'id',
        'Species': 'species',
        'Data source': 'source',
        'Biosample type': 'Biosample',
        'Tissue Type': 'tissuetype',
        'Biosample name': 'date'
      };

      const property = columnMap[columnName];
      if (!property) return;

      // 排序数据
      filteredData.sort((a, b) => {
        const aValue = a[property] || '';
        const bValue = b[property] || '';

        if (aValue === bValue) return 0;

        const aNum=parseFloat(aValue);
        const bNum=parseFloat(bValue);
        if (!isNaN(aNum)&&!isNaN(bNum)) {
          return direction === 'asc' ? aNum - bNum : bNum - aNum;
        }

        // 字符串比较
        return direction === 'asc'
                ? aValue.localeCompare(bValue)
                : bValue.localeCompare(aValue);
      });

      renderTable(filteredData, currentPage);
    }





    // 解析CSV数据
    function parseCSV(csvText) {
      const lines = csvText.split('\n').filter(line => line.trim() !== '');
      if (lines.length === 0) return [];


      return lines.slice(1).map(line => {
        const values = line.split(/,(?=(?:(?:[^"]*"){2})*[^"]*$)/)
                .map(v => v.trim().replace(/^"|"$/g, ''));


        return {
          id: values[0]?.trim() || '',
          species: values[1]?.trim() || '',
          source: values[2]?.trim() || '',
          Biosample: values[3]?.trim() || '',
          tissuetype: values[4]?.trim() || '',
          date: values[5]?.trim() || ''
        };
      });
    }
    // 渲染表格和分页
    function renderTable(data, page = 1) {
      const tbody = document.querySelector("#data-table tbody");
      const start = (page - 1) * rowsPerPage;
      const end = start + rowsPerPage;
      const paginatedData = data.slice(start, end);

      tbody.innerHTML = paginatedData.map(item => `
            <tr>
                <td class="sample-id" data-id="${item.id}">${item.id}</td>
                <td>${item.species}</td>
                <td>${item.source}</td>
                <td>${item.Biosample}</td>
                <td>${item.tissuetype}</td>
                <td>${item.date}</td>
            </tr>
        `).join("");
      //添加点击事件监听器
      addSampleIdClickHandlers();

      // 更新分页控件
      renderPagination(data.length, page);

      // 更新结果计数显示
      updateResultCount(paginatedData.length, data.length, start + 1);
    }

    //点击事件处理函数
    function addSampleIdClickHandlers(){
      document.querySelectorAll('#data-table tbody td.sample-id').forEach(cell=>{
        cell.addEventListener('click',function(e){
          e.preventDefault();
          const sampleId=this.dataset.id;
          window.location.href=`Search.html?SampleId=${encodeURIComponent(sampleId)}`;
        })
      })
    }

    // 更新结果计数
    function updateResultCount(visibleCount, totalCount, startIndex) {
      const endIndex = startIndex + visibleCount - 1;
      document.getElementById("result-count").textContent =
              `From ${startIndex} to ${endIndex} results, Total ${totalCount} items`;
    }

    // 渲染分页控件
    function renderPagination(totalItems, currentPage) {
      const totalPages = Math.ceil(totalItems / rowsPerPage);
      const pagination = document.getElementById("pagination");
      pagination.innerHTML = "";

      if (totalItems === 0) {
        pagination.innerHTML = '<li>No data available</li>';
        return;
      }

      // 上一页按钮
      if (currentPage > 1) {
        pagination.innerHTML += `
                <li><a href="#" class="page-link" data-page="${currentPage - 1}">«</a></li>
            `;
      }
      // 下一页按钮
      if (currentPage < totalPages) {
        pagination.innerHTML += `
                <li><a href="#" class="page-link" data-page="${currentPage + 1}">»</a></li>
            `;
      }
      // 显示最多5个页码按钮
      const maxVisiblePages = 5;
      let startPage = Math.max(1, currentPage - Math.floor(maxVisiblePages / 2));
      let endPage = Math.min(totalPages, startPage + maxVisiblePages - 1);

      // 调整起始页码以确保显示maxVisiblePages个按钮
      if (endPage - startPage + 1 < maxVisiblePages) {
        startPage = Math.max(1, endPage - maxVisiblePages + 1);
      }

      // 第一页按钮
      if (startPage > 1) {
        pagination.innerHTML += `
                <li><a href="#" class="page-link" data-page="1">1</a></li>
                ${startPage > 2 ? '<li><span>...</span></li>' : ''}
            `;
      }

      // 页码按钮
      for (let i = startPage; i <= endPage; i++) {
        pagination.innerHTML += `
                <li><a href="#" class="page-link ${i === currentPage ? 'active' : ''}"
                     data-page="${i}">${i}</a></li>
            `;
      }

      // 最后一页按钮
      if (endPage < totalPages) {
        pagination.innerHTML += `
                ${endPage < totalPages - 1 ? '<li><span>...</span></li>' : ''}
                <li><a href="#" class="page-link" data-page="${totalPages}">${totalPages}</a></li>
            `;
      }


      // 添加分页点击事件
      document.querySelectorAll('.page-link').forEach(link => {
        link.addEventListener('click', function(e) {
          e.preventDefault();
          currentPage = parseInt(this.dataset.page);
          renderTable(filteredData, currentPage);
        });
      });
    }


    // 筛选逻辑
    let activeFilters = {
      species: null,
      source: null,
      tissuetype: null,
      Biosample: null
    };

    // 获取当前筛选后的数据
    function getFilteredData() {
      return tableData.filter(item => {
        return Object.entries(activeFilters).every(([key, value]) =>
                value ? item[key] === value : true
        );
      });
    }

    //更新所有筛选按钮的计数
    function updateFilterCounts(){
      document.querySelectorAll('.filter-list').forEach(filterList=>{
        const filterType=filterList.dataset.filter;
        const items=filterList.querySelectorAll('div');

        items.forEach(item=>{
          const button=item.querySelector('button');
          const span=item.querySelector('span');
          const filterValue=span.dataset.value;

          //计算当前筛选值在其他筛选条件下的匹配数量
          const tempFilters={...activeFilters};
          tempFilters[filterType]=filterValue;

          const count=tableData.filter(item=>{
            return Object.entries(tempFilters).every(([key,value])=>
              value?item[key]===value:true
            );
          }).length;
          button.textContent=count;
        })
      })
    }

    // 筛选点击事件
    document.querySelectorAll(".filter-list div").forEach(item => {
      item.addEventListener("click", (e) => {
        if(e.target.tagName==='BUTTON')return;
        e.preventDefault();

        const filterType=item.parentElement.dataset.filter;
        const span=item.querySelector('span');
        const filterValue=span.dataset.value;

        //更新筛选状态
        activeFilters[filterType]=activeFilters[filterType]===filterValue?null:filterValue;
        document.querySelectorAll(`.filter-list[data-filter="${filterType}"] div`).forEach(el=>{
          el.classList.remove('active');
        })
        if(activeFilters[filterType]===filterValue){
          item.classList.add('active');
        }
        currentPage=1;
        filteredData=getFilteredData();
        renderTable(filteredData,currentPage);

        updateFilterCounts();

      });
    });


  </script>



</section>



<footer>
  <hr style="height:10px;background-color:#f7901d;border:none;margin-top:10px;">
  <div class="footer-1">
    <a href="Home.html">Home<span>|</span></a>
    <a href="Data-Browse.html">Data-Browse<span>|</span></a>
    <a href="Search.html">Search</a>
    <a>Analysis<span>|</span></a>
    <a>Genome-Browse<span>|</span></a>
    <a>Download<span>|</span></a>
    <a>Statistics<span>|</span></a>
    <a>Contact<span>|</span></a>
    <a>Help</a>

  </div>
  <div class="footer-1">
    <ul>
      <li>Copyright  HMU<span>|</span></li>
      <li> 黑ICP备16009434号-1<span>|</span></li>
      <li>  黑ICP备16009434号-1<span>|</span></li>
      <li>Li C Lab</li>
    </ul>
  </div>
</footer>
</body>
</html>